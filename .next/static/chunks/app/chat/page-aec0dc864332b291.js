(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[929],{5550:(e,t,s)=>{Promise.resolve().then(s.bind(s,6564))},1066:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var r=s(2265),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,t)=>{let s=(0,r.forwardRef)((s,i)=>{let{color:o="currentColor",size:l=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:m="",children:u,...h}=s;return(0,r.createElement)("svg",{ref:i,...a,width:l,height:l,stroke:o,strokeWidth:d?24*Number(c)/Number(l):c,className:["lucide","lucide-".concat(n(e)),m].join(" "),...h},[...t.map(e=>{let[t,s]=e;return(0,r.createElement)(t,s)}),...Array.isArray(u)?u:[u]])});return s.displayName="".concat(e),s}},5137:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(1066).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},4042:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(1066).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},7138:(e,t,s)=>{"use strict";s.d(t,{default:()=>a.a});var r=s(231),a=s.n(r)},6564:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s(7437),a=s(2265),n=s(5137),i=s(4042),o=s(1066);let l=(0,o.Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),c=(0,o.Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);var d=s(7138);function m(){let[e,t]=(0,a.useState)([{id:"welcome",conversation_id:"demo",role:"assistant",content:"\xa1Hola! Soy SerenIA, tu asistente de bienestar emocional. Estoy aqu\xed para escucharte y acompa\xf1arte en tu camino hacia el bienestar, siempre desde una perspectiva de amor y fe cristiana.\n\nPuedes contarme c\xf3mo te sientes, qu\xe9 te preocupa, o simplemente conversar conmigo. Todo lo que compartas ser\xe1 tratado con respeto y confidencialidad.\n\n\xbfC\xf3mo te sientes hoy?",created_at:new Date().toISOString()}]),[s,o]=(0,a.useState)(""),[m,u]=(0,a.useState)(!1),h=(0,a.useRef)(null),x=()=>{var e;null===(e=h.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,a.useEffect)(()=>{x()},[e]);let g=async r=>{if(r.preventDefault(),!s.trim()||m)return;let a={id:Date.now().toString(),conversation_id:"demo",role:"user",content:s,created_at:new Date().toISOString()};t(e=>[...e,a]),o(""),u(!0);try{let r=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:s,conversationHistory:e.slice(-5)})}),a=await r.json();if(r.ok){let e={id:Date.now().toString()+"_ai",conversation_id:"demo",role:"assistant",content:a.content,created_at:new Date().toISOString(),riskLevel:a.riskLevel,suggestedActions:a.suggestedActions};t(t=>[...t,e])}else throw Error(a.error||"Error al enviar mensaje")}catch(s){console.error("Error sending message:",s);let e={id:Date.now().toString()+"_error",conversation_id:"demo",role:"assistant",content:"Lo siento, hubo un error al procesar tu mensaje. Por favor, intenta de nuevo.",created_at:new Date().toISOString()};t(t=>[...t,e])}finally{u(!1)}},p=e=>{switch(e){case"crisis":return"border-red-500 bg-red-50";case"high":return"border-orange-500 bg-orange-50";case"medium":return"border-yellow-500 bg-yellow-50";default:return"border-green-500 bg-green-50"}};return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-serenia-50 to-serenity-100 flex flex-col",children:[(0,r.jsxs)("header",{className:"bg-white shadow-sm p-4 flex items-center",children:[(0,r.jsx)(d.default,{href:"/",className:"mr-4",children:(0,r.jsx)(n.Z,{className:"w-6 h-6 text-serenity-600 hover:text-serenity-800"})}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(i.Z,{className:"w-8 h-8 text-serenia-500 mr-3"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-xl font-bold text-serenia-800",children:"SerenIA"}),(0,r.jsx)("p",{className:"text-sm text-serenity-600",children:"Tu asistente de bienestar emocional"})]})]})]}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.map(e=>(0,r.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,r.jsxs)("div",{className:"max-w-[80%] rounded-lg p-4 ".concat("user"===e.role?"bg-serenia-500 text-white":"bg-white text-serenity-800 border-l-4 ".concat(p(e.riskLevel))),children:[(0,r.jsx)("div",{className:"whitespace-pre-wrap",children:e.content}),e.riskLevel&&"low"!==e.riskLevel&&(0,r.jsxs)("div",{className:"mt-3 flex items-center text-sm",children:[(0,r.jsx)(l,{className:"w-4 h-4 mr-2 ".concat("crisis"===e.riskLevel?"text-red-500":"high"===e.riskLevel?"text-orange-500":"text-yellow-500")}),(0,r.jsxs)("span",{className:"font-medium",children:["crisis"===e.riskLevel&&"Nivel de crisis detectado","high"===e.riskLevel&&"Necesita atenci\xf3n","medium"===e.riskLevel&&"Requiere cuidado"]})]}),e.suggestedActions&&e.suggestedActions.length>0&&(0,r.jsxs)("div",{className:"mt-3 p-3 bg-serenity-50 rounded border",children:[(0,r.jsx)("h4",{className:"font-medium text-serenity-800 mb-2",children:"Sugerencias:"}),(0,r.jsx)("ul",{className:"text-sm text-serenity-700 space-y-1",children:e.suggestedActions.map((e,t)=>(0,r.jsxs)("li",{className:"flex items-start",children:[(0,r.jsx)("span",{className:"mr-2",children:"â€¢"}),(0,r.jsx)("span",{children:e})]},t))})]}),(0,r.jsx)("div",{className:"text-xs mt-2 ".concat("user"===e.role?"text-serenia-100":"text-serenity-500"),children:new Date(e.created_at).toLocaleTimeString()})]})},e.id)),m&&(0,r.jsx)("div",{className:"flex justify-start",children:(0,r.jsx)("div",{className:"bg-white rounded-lg p-4 max-w-[80%] border-l-4 border-serenia-500",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-serenia-500 rounded-full animate-bounce"}),(0,r.jsx)("div",{className:"w-2 h-2 bg-serenia-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,r.jsx)("div",{className:"w-2 h-2 bg-serenia-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}}),(0,r.jsx)("span",{className:"text-serenity-600 text-sm",children:"SerenIA est\xe1 pensando..."})]})})}),(0,r.jsx)("div",{ref:h})]}),(0,r.jsx)("form",{onSubmit:g,className:"p-4 bg-white border-t",children:(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("input",{type:"text",value:s,onChange:e=>o(e.target.value),placeholder:"Escribe tu mensaje aqu\xed...",className:"flex-1 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-serenia-500 focus:border-transparent",disabled:m}),(0,r.jsx)("button",{type:"submit",disabled:!s.trim()||m,className:"px-6 py-3 bg-serenia-600 text-white rounded-lg hover:bg-serenia-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:(0,r.jsx)(c,{className:"w-5 h-5"})})]})}),(0,r.jsx)("div",{className:"bg-red-100 border-t border-red-200 p-3",children:(0,r.jsxs)("p",{className:"text-red-800 text-xs text-center",children:[(0,r.jsx)("strong",{children:"Recuerda:"})," En caso de emergencia, contacta inmediatamente al 911 o llama a la l\xednea de crisis: 1-800-273-8255"]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[231,130,215,560],()=>t(5550)),_N_E=e.O()}]);